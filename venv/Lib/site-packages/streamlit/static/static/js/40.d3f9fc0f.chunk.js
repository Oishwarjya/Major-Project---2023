(this["webpackJsonpstreamlit-browser"]=this["webpackJsonpstreamlit-browser"]||[]).push([[40],{1753:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return M}));var o,r=n(17),a=n(5),i=n(0),c=n.n(i),l=n(1400),d=n(467),s=n(1709),u=n(32),h=n(72),b=n(216),m=n(24),g=n(137),f=n(40);function p(e){var t=e&&g.b.getTypeName(e),n=o.Text;return t?"bool"===t?n=o.Boolean:["int64","float64","range"].includes(t)?n=o.Number:t.startsWith("list")&&(n=o.List):n=o.Text,n}function v(e){return(e.displayContent||g.b.format(e.content,e.contentType,e.field)).replace(/(\r\n|\n|\r)/gm," ")}function y(e,t,n){var o=new RegExp("".concat(e,"[,\\s].*{(?:[^}]*[\\s;]{1})?").concat(t,":\\s*([^;}]+)[;]?.*}"),"gm");n=n.replace(/{/g," {");var r=o.exec(n);if(r)return r[1].trim()}function w(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"normal";if(e===o.Text)return{kind:l.c.Text,data:"",displayData:"",allowOverlay:!0,readonly:t,style:n};if(e===o.Boolean)return{kind:l.c.Boolean,data:!1,readonly:t,allowOverlay:!1,style:n};if(e===o.Number)return{kind:l.c.Number,data:void 0,displayData:"",readonly:t,allowOverlay:!0,contentAlign:"right",style:n};if(e===o.List)return{kind:l.c.Bubble,data:[],allowOverlay:!0,style:n};throw new Error("Unsupported cell type: ".concat(e))}!function(e){e.Text="text",e.Number="number",e.Boolean="boolean",e.List="list"}(o||(o={}));var x=n(25),O=n(9),j=Object(O.a)("div",{target:"e17g77xh0"})((function(){var e;return{position:"relative",display:"inline-block","& .glideDataEditor":{height:"100%",minWidth:"100%"},"& .dvn-scroller":(e={scrollbarWidth:"thin"},Object(x.a)(e,"overflowX","overlay !important"),Object(x.a)(e,"overflowY","overlay !important"),e)}}),""),C=(n(1545),n(1)),T=35;function S(e){return{accentColor:e.colors.primary,accentFg:e.colors.white,accentLight:Object(u.g)(e.colors.primary,.9),borderColor:e.colors.fadedText05,fontFamily:e.genericFonts.bodyFont,bgSearchResult:Object(u.g)(e.colors.primary,.9),bgIconHeader:e.colors.fadedText60,fgIconHeader:e.colors.white,bgHeader:e.colors.bgMix,bgHeaderHasFocus:e.colors.secondaryBg,bgHeaderHovered:e.colors.bgMix,textHeader:e.colors.fadedText60,textHeaderSelected:e.colors.white,headerFontStyle:"".concat(e.fontSizes.sm),baseFontStyle:e.fontSizes.sm,editorFontSize:e.fontSizes.sm,textDark:e.colors.bodyText,textMedium:Object(u.g)(e.colors.bodyText,.2),textLight:e.colors.fadedText60,textBubble:e.colors.fadedText60,bgCell:e.colors.bgColor,bgCellMedium:e.colors.bgColor,cellHorizontalPadding:8,cellVerticalPadding:3,bgBubble:e.colors.secondaryBg,bgBubbleSelected:e.colors.secondaryBg,linkColor:e.colors.linkText,drilldownBorder:e.colors.darkenedBgMix25}}function k(e,t,n){var d,u,h,b=Object(i.useState)((function(){return new Map})),g=Object(r.a)(b,2),x=g[0],O=g[1],j=function(e,t){var n,r,i,c,l,d,s=[],u=e.useContainerWidth||e.width;if(t.isEmpty())return s.push(Object(a.a)({id:"empty-index",title:"",hasMenu:!1,getTemplate:function(){return w(o.Text,!0,"faded")},columnType:o.Text},u?{grow:1}:{})),s;for(var h=null!==(n=null===(r=t.types)||void 0===r||null===(i=r.index)||void 0===i?void 0:i.length)&&void 0!==n?n:0,b=null!==(c=null===(l=t.columns)||void 0===l||null===(d=l[0])||void 0===d?void 0:d.length)&&void 0!==c?c:0,m=function(e){var n=p(t.types.index[e]);s.push(Object(a.a)({id:"index-".concat(e),title:"",hasMenu:!1,getTemplate:function(){return w(n,!0,"faded")},columnType:n},u?{grow:1}:{}))},g=0;g<h;g++)m(g);for(var f=function(e){var n=t.columns[0][e],o=p(t.types.data[e]);s.push(Object(a.a)({id:"column-".concat(n,"-").concat(e),title:n,hasMenu:!1,getTemplate:function(){return w(o,!0)},columnType:o},u?{grow:3}:{}))},v=0;v<b;v++)f(v);return s}(e,t).map((function(e){return e.id&&x.has(e.id)&&void 0!==x.get(e.id)?Object(a.a)(Object(a.a)({},e),{},{width:x.get(e.id),grow:0}):e})),C=t.isEmpty()?1:t.dimensions.rows-1,T=null!==(d=null===(u=t.types)||void 0===u||null===(h=u.index)||void 0===h?void 0:h.length)&&void 0!==d?d:0,S=c.a.useCallback((function(e,t,n,o){e.id&&O(new Map(x).set(e.id,o))}),[j]),k=c.a.useCallback((function(e){var n=Object(r.a)(e,2),i=n[0],c=n[1];if(t.isEmpty())return Object(a.a)(Object(a.a)({},w(o.Text,!0,"faded")),{},{displayData:"empty"});if(i>j.length-1)return w(o.Text,!0);var d=j[i].getTemplate();if(c>C-1)return d;try{return function(e,t){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=e.kind;if(e.kind===l.c.Custom&&!(r=null===(n=e.data)||void 0===n?void 0:n.kind))throw new Error("Unable to determine cell type for custom cell.");if(o&&t.cssId){var i={},c=y(t.cssId,"color",o);c&&(i.textDark=c);var d=y(t.cssId,"background-color",o);d&&(i.bgCell=d),i&&(e=Object(a.a)(Object(a.a)({},e),{},{themeOverride:i}))}if(r===l.c.Text){var s=v(t);return Object(a.a)(Object(a.a)({},e),{},{data:"string"!==typeof t.content&&Object(f.o)(t.content)?s:t.content,displayData:s})}if(r===l.c.Number){var u=v(t),h=t.content;return h instanceof Int32Array&&(h=h[0]),Object(a.a)(Object(a.a)({},e),{},{data:Object(f.o)(h)?Number(h):void 0,displayData:u})}if(r===l.c.Boolean)return Object(a.a)(Object(a.a)({},e),{},{data:t.content});if(r===l.c.Bubble)return Object(a.a)(Object(a.a)({},e),{},{data:Object(f.o)(t.content)?JSON.parse(JSON.stringify(t.content,(function(e,t){return"bigint"===typeof t?Number(t):t}))):[]});throw new Error("Unsupported cell kind: ".concat(r))}(d,t.getCell(c+1,i),t.cssStyles)}catch(s){return Object(m.b)(s),d}}),[j,C,t]),M=Object(s.a)({columns:j,getCellContent:k,rows:C,sort:n}).getCellContent,z=function(e,t){return void 0===t?e:e.map((function(e){return e.id===t.column.id?Object(a.a)(Object(a.a)({},e),{},{title:"asc"===t.direction?"\u2191 ".concat(e.title):"\u2193 ".concat(e.title)}):e}))}(j,n);return{numRows:C,numIndices:T,columns:z,getCellContent:M,onColumnResize:S}}var M=Object(b.a)((function(e){var t,n=e.element,a=e.data,i=e.width,s=e.height,u=e.isFullScreen,b=c.a.useState(),m=Object(r.a)(b,2),g=m[0],f=m[1],p=c.a.useRef(null),v=Object(h.g)(),y=n.useContainerWidth||n.width,w=k(n,a,g),x=w.numRows,O=w.numIndices,M=w.columns,z=w.getCellContent,B=w.onColumnResize,H=c.a.useState(!0),N=Object(r.a)(H,2),R=N[0],E=N[1],F=c.a.useState({columns:l.a.empty(),rows:l.a.empty()}),W=Object(r.a)(F,2),D=W[0],L=W[1],I=c.a.useRef(null),J=c.a.useCallback((function(e){var t,n="asc",r=M[e];if(g&&g.column.id===r.id){if("asc"!==g.direction)return void f(void 0);n="desc"}f({column:r,direction:n,mode:(t=r.columnType,t===o.Number?"smart":"default")})}),[g,M]),U=Math.max((x+1)*T+1+2,73),A=Math.min(U,400);n.height&&(A=Math.max(n.height,73),U=Math.max(n.height,U)),s&&(A=Math.min(A,s),U=Math.min(U,s),n.height||(A=U));var G=i;n.useContainerWidth?t=i:n.width&&(t=Math.min(Math.max(n.width,38),i),G=Math.min(Math.max(n.width,G),i));var P=c.a.useState({width:t||"100%",height:A}),X=Object(r.a)(P,2),Y=X[0],V=X[1];return c.a.useLayoutEffect((function(){I.current&&n.useContainerWidth&&"100%"===Y.width&&V({width:i,height:Y.height})}),[i]),c.a.useLayoutEffect((function(){I.current&&V({width:Y.width,height:A})}),[x]),c.a.useLayoutEffect((function(){I.current&&V(u?{width:y?G:"100%",height:U}:{width:t||"100%",height:A})}),[u]),Object(C.jsx)(j,{className:"stDataFrame",onBlur:function(){R||L({columns:l.a.empty(),rows:l.a.empty(),current:void 0})},children:Object(C.jsx)(d.a,{"data-testid":"stDataFrameResizable",ref:I,defaultSize:Y,style:{border:"1px solid ".concat(v.colors.fadedText05)},minHeight:73,maxHeight:U,minWidth:38,maxWidth:G,enable:{top:!1,right:!1,bottom:!1,left:!1,topRight:!1,bottomRight:!0,bottomLeft:!1,topLeft:!1},grid:[1,T],snapGap:T/3,size:Y,onResizeStop:function(e,t,n,o){I.current&&V({width:I.current.size.width,height:U-I.current.size.height===3?I.current.size.height+3:I.current.size.height})},children:Object(C.jsx)(l.b,{className:"glideDataEditor",ref:p,columns:M,rows:x,minColumnWidth:35,maxColumnWidth:650,rowHeight:T,headerHeight:T,getCellContent:z,onColumnResize:B,freezeColumns:O,smoothScrollX:!0,smoothScrollY:x<1e5,verticalBorder:!0,getCellsForSelection:!0,rowMarkers:"none",rangeSelect:"rect",columnSelect:"none",rowSelect:"none",keybindings:{search:!0},onHeaderClicked:J,gridSelection:D,onGridSelectionChange:function(e){L(e)},theme:S(v),onMouseMove:function(e){"out-of-bounds"===e.kind&&R?E(!1):"out-of-bounds"===e.kind||R||E(!0)},experimental:{scrollbarWidthOverride:1}})})})}))}}]);